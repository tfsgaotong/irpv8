<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="IRP_MESSAGE_CONTENT" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    <result column="MESSAGEID" property="messageid" jdbcType="DECIMAL" />
    <result column="FROM_UID" property="fromUid" jdbcType="DECIMAL" />
    <result column="CONTENT" property="content" jdbcType="VARCHAR" />
    <result column="ISDEL" property="isdel" jdbcType="DECIMAL" />
    <result column="CRTIME" property="crtime" jdbcType="TIMESTAMP" />
    <result column="CRUSERID" property="cruserid" jdbcType="DECIMAL" />
    <result column="CRISDEL" property="crisdel" jdbcType="DECIMAL" />
    <result column="BROWSESTATUS" property="browsestatus" jdbcType="DECIMAL" />
    <result column="MESSAGETYPE" property="messagetype" jdbcType="DECIMAL" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContentExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    select MESSAGEID, FROM_UID, CONTENT, ISDEL, CRTIME, CRUSERID, CRISDEL, BROWSESTATUS,MESSAGETYPE
    from IRP_MESSAGE_CONTENT
    <isParameterPresent >
      <include refid="IRP_MESSAGE_CONTENT.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    select MESSAGEID, FROM_UID, CONTENT, ISDEL, CRTIME, CRUSERID, CRISDEL, BROWSESTATUS,MESSAGETYPE
    from IRP_MESSAGE_CONTENT
    where MESSAGEID = #messageid:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    delete from IRP_MESSAGE_CONTENT
    where MESSAGEID = #messageid:DECIMAL#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContentExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    delete from IRP_MESSAGE_CONTENT
    <include refid="IRP_MESSAGE_CONTENT.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    insert into IRP_MESSAGE_CONTENT (MESSAGEID, FROM_UID, CONTENT, ISDEL, CRTIME, CRUSERID, CRISDEL,
      BROWSESTATUS,MESSAGETYPE)
    values (#messageid:DECIMAL#, #fromUid:DECIMAL#, #content:VARCHAR#, #isdel:DECIMAL#,
      #crtime:TIMESTAMP#, #cruserid:DECIMAL#, #crisdel:DECIMAL#, #browsestatus:DECIMAL#, #messagetype:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    insert into IRP_MESSAGE_CONTENT
    <dynamic prepend="(" >
      <isNotNull prepend="," property="messageid" >
        MESSAGEID
      </isNotNull>
      <isNotNull prepend="," property="fromUid" >
        FROM_UID
      </isNotNull>
      <isNotNull prepend="," property="content" >
        CONTENT
      </isNotNull>
      <isNotNull prepend="," property="isdel" >
        ISDEL
      </isNotNull>
      <isNotNull prepend="," property="crtime" >
        CRTIME
      </isNotNull>
      <isNotNull prepend="," property="cruserid" >
        CRUSERID
      </isNotNull>
      <isNotNull prepend="," property="crisdel" >
        CRISDEL
      </isNotNull>
      <isNotNull prepend="," property="browsestatus" >
        BROWSESTATUS
      </isNotNull>
      <isNotNull prepend="," property="messagetype" >
        MESSAGETYPE
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="messageid" >
        #messageid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="fromUid" >
        #fromUid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="content" >
        #content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isdel" >
        #isdel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="crtime" >
        #crtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="cruserid" >
        #cruserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="crisdel" >
        #crisdel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="browsestatus" >
        #browsestatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="messagetype" >
        #messagetype:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContentExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    select count(*) from IRP_MESSAGE_CONTENT
    <include refid="IRP_MESSAGE_CONTENT.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    update IRP_MESSAGE_CONTENT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.messageid" >
        MESSAGEID = #record.messageid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.fromUid" >
        FROM_UID = #record.fromUid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.content" >
        CONTENT = #record.content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.isdel" >
        ISDEL = #record.isdel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.crtime" >
        CRTIME = #record.crtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.cruserid" >
        CRUSERID = #record.cruserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.crisdel" >
        CRISDEL = #record.crisdel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.browsestatus" >
        BROWSESTATUS = #record.browsestatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.messagetype" >
        MESSAGETYPE = #record.messagetype:DECIMAL#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="IRP_MESSAGE_CONTENT.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    update IRP_MESSAGE_CONTENT
    set MESSAGEID = #record.messageid:DECIMAL#,
      FROM_UID = #record.fromUid:DECIMAL#,
      CONTENT = #record.content:VARCHAR#,
      ISDEL = #record.isdel:DECIMAL#,
      CRTIME = #record.crtime:TIMESTAMP#,
      CRUSERID = #record.cruserid:DECIMAL#,
      CRISDEL = #record.crisdel:DECIMAL#,
      BROWSESTATUS = #record.browsestatus:DECIMAL#,
      MESSAGETYPE = #record.messagetype:DECIMAL#
    <isParameterPresent >
      <include refid="IRP_MESSAGE_CONTENT.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    update IRP_MESSAGE_CONTENT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="fromUid" >
        FROM_UID = #fromUid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="content" >
        CONTENT = #content:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="isdel" >
        ISDEL = #isdel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="crtime" >
        CRTIME = #crtime:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="cruserid" >
        CRUSERID = #cruserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="crisdel" >
        CRISDEL = #crisdel:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="browsestatus" >
        BROWSESTATUS = #browsestatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="messagetype" >
        MESSAGETYPE = #messagetype:DECIMAL#
      </isNotNull>
    </dynamic>
    where MESSAGEID = #messageid:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tfs.irp.messagecontent.entity.IrpMessageContent" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Sun Jun 09 16:47:42 CST 2013.
    -->
    update IRP_MESSAGE_CONTENT
    set FROM_UID = #fromUid:DECIMAL#,
      CONTENT = #content:VARCHAR#,
      ISDEL = #isdel:DECIMAL#,
      CRTIME = #crtime:TIMESTAMP#,
      CRUSERID = #cruserid:DECIMAL#,
      CRISDEL = #crisdel:DECIMAL#,
      BROWSESTATUS = #browsestatus:DECIMAL#,
      MESSAGETYPE = #messagetype:DECIMAL#
    where MESSAGEID = #messageid:DECIMAL#
  </update>
  
  <!-- 私信首页 -->
  <select id="ibatorgenerated_selectGroupByFromUid" resultClass="java.util.HashMap" parameterClass="java.util.Map">
  
  select CRUSERID,max(CRTIME) as CRTIME from IRP_MESSAGE_CONTENT  where
    FROM_UID=#fromUid:DECIMAL#  and ISDEL!=#isdel:DECIMAL# and CRISDEL!=#crisdel:DECIMAL# group by CRUSERID order by CRTIME DESC 
  
  </select>
  <!-- 私信细览 -->
  <select id="ibatorgenerated_selectDetailMessage" resultClass="java.util.HashMap" parameterClass="java.util.Map" >
    select * from irp_message_content  where  (from_uid=#fromUid:DECIMAL# or from_uid =#cruserid:DECIMAL#) 
    and (cruserid = #fromUid:DECIMAL# or cruserid = #cruserid:DECIMAL#) and isdel!=#isdel:DECIMAL# and crisdel!=#crisdel:DECIMAL# order by crtime desc
  </select>
  <!-- 删除私信会话用 -->
  <select id="ibatorgenerated_selectMessageidOfFrandCr" resultClass="java.util.HashMap" parameterClass="java.util.Map">
  select messageid from IRP_MESSAGE_CONTENT where (from_uid=#fromUid:DECIMAL# or from_uid=#cruserid:DECIMAL#) and (cruserid = #fromUid:DECIMAL# or cruserid = #cruserid:DECIMAL#)
  </select>
  <!-- 处理清空私信 -->
  <select id="ibatorgenerated_selectMessageidAll" resultClass="java.util.HashMap" parameterClass="java.util.Map">
  select messageid from IRP_MESSAGE_CONTENT where from_uid=#loginid:DECIMAL# or cruserid =#loginid:DECIMAL#
  </select> 
  <!-- 加载未读私信 -->
  <select id="ibatorgenerated_selectUnReadMessage" resultClass="java.lang.Integer" parameterClass="java.util.Map" >
  select  count(1) from IRP_MESSAGE_CONTENT where from_uid =#fromUid:DECIMAL#  and BROWSESTATUS = #browsestatus:DECIMAL#
  </select>
  <select id="ibatorgenerated_selectUnReadMsg" resultClass="java.lang.Integer" parameterClass="java.util.Map" >
  select  count(1) from IRP_MESSAGE_CONTENT where from_uid =#fromUid:DECIMAL#  and BROWSESTATUS = #browsestatus:DECIMAL# and MESSAGETYPE=#messagetype:DECIMAL# and CRISDEL=#crisdel:DECIMAL#
  </select>
   <!-- 加载未读私信 （会话时）-->
  <select id="ibatorgenerated_selectUnReadMessageDetail" resultClass="java.lang.Integer" parameterClass="java.util.Map" >
  select  count(1) from IRP_MESSAGE_CONTENT where from_uid =#fromUid:DECIMAL#  and BROWSESTATUS = #browsestatus:DECIMAL# and CRUSERID = #cruserid:DECIMAL# and ISDEL!=#del_status_first:DECIMAL# and ISDEL !=#del_status_second:DECIMAL#
  </select>
  
  
</sqlMap>