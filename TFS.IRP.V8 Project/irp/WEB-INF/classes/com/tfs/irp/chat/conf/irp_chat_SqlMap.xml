<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" "http://ibatis.apache.org/dtd/sql-map-2.dtd" >
<sqlMap namespace="IRP_CHAT" >
  <resultMap id="ibatorgenerated_BaseResultMap" class="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    <result column="CHATID" property="chatid" jdbcType="DECIMAL" />
    <result column="RECEIVERUSERID" property="receiveruserid" jdbcType="DECIMAL" />
    <result column="SENDERUSERID" property="senderuserid" jdbcType="DECIMAL" />
    <result column="SENDDATE" property="senddate" jdbcType="TIMESTAMP" />
    <result column="CHATPOINTTYPE" property="chatpointtype" jdbcType="DECIMAL" />
    <result column="CHATCONTENT" property="chatcontent" jdbcType="VARCHAR" />
    <result column="CHATSTATUS" property="chatstatus" jdbcType="DECIMAL" />
    <result column="CHARREADSTATUS" property="charreadstatus" jdbcType="DECIMAL" />
    <result column="UNREADSEARCHDATE" property="unreadsearchdate" jdbcType="TIMESTAMP" />
    <result column="SENDERBOOLRECORD" property="senderboolrecord" jdbcType="DECIMAL" />
    <result column="CHATACCESSORY" property="chataccessory" jdbcType="DECIMAL" />
    <result column="EXTENDONE" property="extendone" jdbcType="DECIMAL" />
    <result column="EXTENDTWO" property="extendtwo" jdbcType="DECIMAL" />
  </resultMap>
  <sql id="ibatorgenerated_Example_Where_Clause" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    <iterate property="oredCriteria" conjunction="or" prepend="where" removeFirstPrepend="iterate" >
      <isEqual property="oredCriteria[].valid" compareValue="true" >
        (
        <iterate prepend="and" property="oredCriteria[].criteriaWithoutValue" conjunction="and" >
          $oredCriteria[].criteriaWithoutValue[]$
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithSingleValue" conjunction="and" >
          $oredCriteria[].criteriaWithSingleValue[].condition$
            #oredCriteria[].criteriaWithSingleValue[].value#
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithListValue" conjunction="and" >
          $oredCriteria[].criteriaWithListValue[].condition$
          <iterate property="oredCriteria[].criteriaWithListValue[].values" open="(" close=")" conjunction="," >
            #oredCriteria[].criteriaWithListValue[].values[]#
          </iterate>
        </iterate>
        <iterate prepend="and" property="oredCriteria[].criteriaWithBetweenValue" conjunction="and" >
          $oredCriteria[].criteriaWithBetweenValue[].condition$
          #oredCriteria[].criteriaWithBetweenValue[].values[0]# and
          #oredCriteria[].criteriaWithBetweenValue[].values[1]#
        </iterate>
        )
      </isEqual>
    </iterate>
  </sql>
  <select id="ibatorgenerated_selectByExample" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tfs.irp.chat.entity.IrpChatExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    select CHATID, RECEIVERUSERID, SENDERUSERID, SENDDATE, CHATPOINTTYPE, CHATCONTENT, CHATSTATUS,
      CHARREADSTATUS, UNREADSEARCHDATE, SENDERBOOLRECORD, CHATACCESSORY, EXTENDONE, EXTENDTWO
    from IRP_CHAT
    <isParameterPresent >
      <include refid="IRP_CHAT.ibatorgenerated_Example_Where_Clause" />
      <isNotNull property="orderByClause" >
        order by $orderByClause$
      </isNotNull>
    </isParameterPresent>
  </select>
  <select id="ibatorgenerated_selectByPrimaryKey" resultMap="ibatorgenerated_BaseResultMap" parameterClass="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    select CHATID, RECEIVERUSERID, SENDERUSERID, SENDDATE, CHATPOINTTYPE, CHATCONTENT, CHATSTATUS,
      CHARREADSTATUS, UNREADSEARCHDATE, SENDERBOOLRECORD, CHATACCESSORY, EXTENDONE, EXTENDTWO
    from IRP_CHAT
    where CHATID = #chatid:DECIMAL#
  </select>
  <delete id="ibatorgenerated_deleteByPrimaryKey" parameterClass="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    delete from IRP_CHAT
    where CHATID = #chatid:DECIMAL#
  </delete>
  <delete id="ibatorgenerated_deleteByExample" parameterClass="com.tfs.irp.chat.entity.IrpChatExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    delete from IRP_CHAT
    <include refid="IRP_CHAT.ibatorgenerated_Example_Where_Clause" />
  </delete>
  <insert id="ibatorgenerated_insert" parameterClass="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    insert into IRP_CHAT (CHATID, RECEIVERUSERID, SENDERUSERID, SENDDATE, CHATPOINTTYPE,
      CHATCONTENT, CHATSTATUS, CHARREADSTATUS, UNREADSEARCHDATE, SENDERBOOLRECORD, CHATACCESSORY,
      EXTENDONE, EXTENDTWO)
    values (#chatid:DECIMAL#, #receiveruserid:DECIMAL#, #senderuserid:DECIMAL#,
      #senddate:TIMESTAMP#, #chatpointtype:DECIMAL#, #chatcontent:VARCHAR#, #chatstatus:DECIMAL#,
      #charreadstatus:DECIMAL#, #unreadsearchdate:TIMESTAMP#, #senderboolrecord:DECIMAL#,
      #chataccessory:DECIMAL#, #extendone:DECIMAL#, #extendtwo:DECIMAL#)
  </insert>
  <insert id="ibatorgenerated_insertSelective" parameterClass="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    insert into IRP_CHAT
    <dynamic prepend="(" >
      <isNotNull prepend="," property="chatid" >
        CHATID
      </isNotNull>
      <isNotNull prepend="," property="receiveruserid" >
        RECEIVERUSERID
      </isNotNull>
      <isNotNull prepend="," property="senderuserid" >
        SENDERUSERID
      </isNotNull>
      <isNotNull prepend="," property="senddate" >
        SENDDATE
      </isNotNull>
      <isNotNull prepend="," property="chatpointtype" >
        CHATPOINTTYPE
      </isNotNull>
      <isNotNull prepend="," property="chatcontent" >
        CHATCONTENT
      </isNotNull>
      <isNotNull prepend="," property="chatstatus" >
        CHATSTATUS
      </isNotNull>
      <isNotNull prepend="," property="charreadstatus" >
        CHARREADSTATUS
      </isNotNull>
      <isNotNull prepend="," property="unreadsearchdate" >
        UNREADSEARCHDATE
      </isNotNull>
      <isNotNull prepend="," property="senderboolrecord" >
        SENDERBOOLRECORD
      </isNotNull>
      <isNotNull prepend="," property="chataccessory" >
        CHATACCESSORY
      </isNotNull>
      <isNotNull prepend="," property="extendone" >
        EXTENDONE
      </isNotNull>
      <isNotNull prepend="," property="extendtwo" >
        EXTENDTWO
      </isNotNull>
      )
    </dynamic>
    values
    <dynamic prepend="(" >
      <isNotNull prepend="," property="chatid" >
        #chatid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="receiveruserid" >
        #receiveruserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="senderuserid" >
        #senderuserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="senddate" >
        #senddate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="chatpointtype" >
        #chatpointtype:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="chatcontent" >
        #chatcontent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="chatstatus" >
        #chatstatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="charreadstatus" >
        #charreadstatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="unreadsearchdate" >
        #unreadsearchdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="senderboolrecord" >
        #senderboolrecord:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="chataccessory" >
        #chataccessory:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="extendone" >
        #extendone:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="extendtwo" >
        #extendtwo:DECIMAL#
      </isNotNull>
      )
    </dynamic>
  </insert>
  <select id="ibatorgenerated_countByExample" parameterClass="com.tfs.irp.chat.entity.IrpChatExample" resultClass="java.lang.Integer" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    select count(*) from IRP_CHAT
    <include refid="IRP_CHAT.ibatorgenerated_Example_Where_Clause" />
  </select>
  <update id="ibatorgenerated_updateByExampleSelective" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    update IRP_CHAT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="record.chatid" >
        CHATID = #record.chatid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.receiveruserid" >
        RECEIVERUSERID = #record.receiveruserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.senderuserid" >
        SENDERUSERID = #record.senderuserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.senddate" >
        SENDDATE = #record.senddate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.chatpointtype" >
        CHATPOINTTYPE = #record.chatpointtype:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.chatcontent" >
        CHATCONTENT = #record.chatcontent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="record.chatstatus" >
        CHATSTATUS = #record.chatstatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.charreadstatus" >
        CHARREADSTATUS = #record.charreadstatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.unreadsearchdate" >
        UNREADSEARCHDATE = #record.unreadsearchdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="record.senderboolrecord" >
        SENDERBOOLRECORD = #record.senderboolrecord:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.chataccessory" >
        CHATACCESSORY = #record.chataccessory:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.extendone" >
        EXTENDONE = #record.extendone:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="record.extendtwo" >
        EXTENDTWO = #record.extendtwo:DECIMAL#
      </isNotNull>
    </dynamic>
    <isParameterPresent >
      <include refid="IRP_CHAT.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByExample" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    update IRP_CHAT
    set CHATID = #record.chatid:DECIMAL#,
      RECEIVERUSERID = #record.receiveruserid:DECIMAL#,
      SENDERUSERID = #record.senderuserid:DECIMAL#,
      SENDDATE = #record.senddate:TIMESTAMP#,
      CHATPOINTTYPE = #record.chatpointtype:DECIMAL#,
      CHATCONTENT = #record.chatcontent:VARCHAR#,
      CHATSTATUS = #record.chatstatus:DECIMAL#,
      CHARREADSTATUS = #record.charreadstatus:DECIMAL#,
      UNREADSEARCHDATE = #record.unreadsearchdate:TIMESTAMP#,
      SENDERBOOLRECORD = #record.senderboolrecord:DECIMAL#,
      CHATACCESSORY = #record.chataccessory:DECIMAL#,
      EXTENDONE = #record.extendone:DECIMAL#,
      EXTENDTWO = #record.extendtwo:DECIMAL#
    <isParameterPresent >
      <include refid="IRP_CHAT.ibatorgenerated_Example_Where_Clause" />
    </isParameterPresent>
  </update>
  <update id="ibatorgenerated_updateByPrimaryKeySelective" parameterClass="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    update IRP_CHAT
    <dynamic prepend="set" >
      <isNotNull prepend="," property="receiveruserid" >
        RECEIVERUSERID = #receiveruserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="senderuserid" >
        SENDERUSERID = #senderuserid:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="senddate" >
        SENDDATE = #senddate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="chatpointtype" >
        CHATPOINTTYPE = #chatpointtype:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="chatcontent" >
        CHATCONTENT = #chatcontent:VARCHAR#
      </isNotNull>
      <isNotNull prepend="," property="chatstatus" >
        CHATSTATUS = #chatstatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="charreadstatus" >
        CHARREADSTATUS = #charreadstatus:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="unreadsearchdate" >
        UNREADSEARCHDATE = #unreadsearchdate:TIMESTAMP#
      </isNotNull>
      <isNotNull prepend="," property="senderboolrecord" >
        SENDERBOOLRECORD = #senderboolrecord:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="chataccessory" >
        CHATACCESSORY = #chataccessory:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="extendone" >
        EXTENDONE = #extendone:DECIMAL#
      </isNotNull>
      <isNotNull prepend="," property="extendtwo" >
        EXTENDTWO = #extendtwo:DECIMAL#
      </isNotNull>
    </dynamic>
    where CHATID = #chatid:DECIMAL#
  </update>
  <update id="ibatorgenerated_updateByPrimaryKey" parameterClass="com.tfs.irp.chat.entity.IrpChat" >
    <!--
      WARNING - This element is automatically generated by Apache iBATIS ibator, do not modify.
      This element was generated on Fri Aug 01 11:06:43 CST 2014.
    -->
    update IRP_CHAT
    set RECEIVERUSERID = #receiveruserid:DECIMAL#,
      SENDERUSERID = #senderuserid:DECIMAL#,
      SENDDATE = #senddate:TIMESTAMP#,
      CHATPOINTTYPE = #chatpointtype:DECIMAL#,
      CHATCONTENT = #chatcontent:VARCHAR#,
      CHATSTATUS = #chatstatus:DECIMAL#,
      CHARREADSTATUS = #charreadstatus:DECIMAL#,
      UNREADSEARCHDATE = #unreadsearchdate:TIMESTAMP#,
      SENDERBOOLRECORD = #senderboolrecord:DECIMAL#,
      CHATACCESSORY = #chataccessory:DECIMAL#,
      EXTENDONE = #extendone:DECIMAL#,
      EXTENDTWO = #extendtwo:DECIMAL#
    where CHATID = #chatid:DECIMAL#
  </update>
  <!-- select unread user count -->
  <select id="ibatorgenerated_selectunreadbuusercount" resultClass="java.util.HashMap" parameterClass="java.util.Map">
  
  	SELECT MAX(CHATID) AS CHATID  FROM irp_chat WHERE CHARREADSTATUS = #readstatus:DECIMAL# AND RECEIVERUSERID = #receuser:DECIMAL# AND CHATSTATUS = #status:DECIMAL#    GROUP BY SENDERUSERID ORDER BY CHATID DESC
  
  </select>
  
  
</sqlMap>